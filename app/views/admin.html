<!-- Admin Dashboard View -->
<div class="admin-layout">
    <div class="container-fluid">
        <div class="row">
            <!-- Sidebar -->
            <div class="col-md-3 col-lg-2 d-md-block admin-sidebar">
                <div class="admin-sidebar-content">
                    <div class="admin-sidebar-header">
                        <h5 class="admin-sidebar-title">
                            <i class="bi bi-shield-check"></i>
                            Quản trị hệ thống
                        </h5>
                    </div>
                    <nav class="admin-nav">
                        <ul class="admin-nav-list">
                            <li class="admin-nav-item">
                                <a class="admin-nav-link active" href="#!/admin">
                                    <i class="bi bi-speedometer2"></i>
                                    <span>Dashboard</span>
                                </a>
                            </li>
                            <li class="admin-nav-item">
                                <a class="admin-nav-link" href="#!/admin/categories">
                                    <i class="bi bi-tags"></i>
                                    <span>Danh mục</span>
                                </a>
                            </li>
                            <li class="admin-nav-item">
                                <a class="admin-nav-link" href="#!/admin/books">
                                    <i class="bi bi-book"></i>
                                    <span>Quản lý sách</span>
                                </a>
                            </li>
                            <li class="admin-nav-item">
                                <a class="admin-nav-link" href="#!/admin/orders">
                                    <i class="bi bi-cart-check"></i>
                                    <span>Đơn hàng</span>
                                </a>
                            </li>
                            <li class="admin-nav-item">
                                <a class="admin-nav-link" href="#!/admin/purchase-orders">
                                    <i class="bi bi-cart-plus"></i>
                                    <span>Đơn đặt hàng</span>
                                </a>
                            </li>
                            <li class="admin-nav-item">
                                <a class="admin-nav-link" href="#!/admin/goods-receipts">
                                    <i class="bi bi-box-seam"></i>
                                    <span>Phiếu nhập</span>
                                </a>
                            </li>
                            <li class="admin-nav-item">
                                <a class="admin-nav-link" href="#!/admin/users">
                                    <i class="bi bi-people"></i>
                                    <span>Người dùng</span>
                                </a>
                            </li>
                            <li class="admin-nav-item">
                                <a class="admin-nav-link" href="#!/admin/roles" admin-only>
                                    <i class="bi bi-shield-lock"></i>
                                    <span>Phân quyền</span>
                                </a>
                            </li>
                            <li class="admin-nav-item">
                                <a class="admin-nav-link" href="#!/admin/reports/revenue">
                                    <i class="bi bi-graph-up"></i>
                                    <span>Báo cáo</span>
                                </a>
                            </li>
                            <li class="admin-nav-item">
                                <a class="admin-nav-link" href="#!/admin/promotions">
                                    <i class="bi bi-gift"></i>
                                    <span>Khuyến mãi</span>
                                </a>
                            </li>
                            <li class="admin-nav-item">
                                <a class="admin-nav-link" href="#!/admin/settings">
                                    <i class="bi bi-gear"></i>
                                    <span>Cài đặt</span>
                                </a>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>

            <!-- Main content -->
            <main class="col-md-9 ms-sm-auto col-lg-10 admin-main-content">
            <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                <h1 class="h2">Dashboard Admin</h1>
                <div class="btn-toolbar mb-2 mb-md-0">
                    <div class="btn-group me-2">
                        <button type="button" class="btn btn-sm btn-outline-secondary">
                            <i class="bi bi-download"></i> Export
                        </button>
                    </div>
                </div>
            </div>

            <!-- Stats Cards -->
            <div class="row mb-md">
                <div class="col-xl-3 col-md-6 mb-md">
                    <div class="card card-sm card-primary">
                        <div class="card-body p-md">
                            <div class="row no-gutters align-items-center">
                                <div class="col mr-2">
                                    <div class="text-xs font-weight-bold text-primary text-uppercase mb-sm">
                                        Tổng người dùng
                                    </div>
                                    <div class="h5 mb-0 font-weight-bold text-gray-800">{{stats.totalUsers}}</div>
                                </div>
                                <div class="col-auto">
                                    <i class="bi bi-people icon-lg text-gray-300"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-xl-3 col-md-6 mb-md">
                    <div class="card card-sm card-success">
                        <div class="card-body p-md">
                            <div class="row no-gutters align-items-center">
                                <div class="col mr-2">
                                    <div class="text-xs font-weight-bold text-success text-uppercase mb-sm">
                                        Tổng sách
                                    </div>
                                    <div class="h5 mb-0 font-weight-bold text-gray-800">{{stats.totalBooks}}</div>
                                </div>
                                <div class="col-auto">
                                    <i class="bi bi-book icon-lg text-gray-300"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-xl-3 col-md-6 mb-md">
                    <div class="card card-sm card-info">
                        <div class="card-body p-md">
                            <div class="row no-gutters align-items-center">
                                <div class="col mr-2">
                                    <div class="text-xs font-weight-bold text-info text-uppercase mb-sm">
                                        Đơn hàng hôm nay
                                    </div>
                                    <div class="h5 mb-0 font-weight-bold text-gray-800">{{stats.todayOrders}}</div>
                                </div>
                                <div class="col-auto">
                                    <i class="bi bi-cart-check icon-lg text-gray-300"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-xl-3 col-md-6 mb-md">
                    <div class="card card-sm card-warning">
                        <div class="card-body p-md">
                            <div class="row no-gutters align-items-center">
                                <div class="col mr-2">
                                    <div class="text-xs font-weight-bold text-warning text-uppercase mb-sm">
                                        Doanh thu tháng
                                    </div>
                                    <div class="h5 mb-0 font-weight-bold text-gray-800">{{stats.monthlyRevenue | currency:'VND '}}</div>
                                </div>
                                <div class="col-auto">
                                    <i class="bi bi-currency-dollar icon-lg text-gray-300"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Recent Activity -->
            <div class="row">
                <div class="col-lg-8">
                    <div class="card mb-md">
                        <div class="card-header">
                            <h6 class="m-0 font-weight-bold text-primary text-sm">Sách mới</h6>
                        </div>
                        <div class="card-body p-md">
                            <ul class="list-group list-group-flush">
                                <li class="list-group-item px-0 py-2" ng-repeat="b in latestBooks">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <div class="text-truncate" style="max-width: 520px">
                                            <i class="bi bi-book me-1"></i><span class="fw-semibold">{{b.title}}</span>
                                            <div class="small text-muted">ISBN: {{b.isbn}}</div>
                                        </div>
                                        <span class="badge bg-primary">{{b.unitPrice | currency}}</span>
                                    </div>
                                </li>
                                <li class="list-group-item px-0 py-2" ng-if="!latestBooks || latestBooks.length === 0">
                                    <span class="text-muted small">Chưa có dữ liệu</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4">
                    <div class="card mb-md">
                        <div class="card-header">
                            <h6 class="m-0 font-weight-bold text-primary text-sm">Thống kê nhanh</h6>
                        </div>
                        <div class="card-body p-md">
                            <div class="text-center">
                                <div class="mb-md">
                                    <i class="bi bi-graph-up text-success icon-3xl"></i>
                                </div>
                                <h4 class="text-success text-2xl">{{stats.growthRate}}%</h4>
                                <p class="text-muted text-sm">Tăng trưởng so với tháng trước</p>
                            </div>
                            
                            <hr class="my-md">
                            
                            <div class="row text-center">
                                <div class="col-12">
                                    <div class="d-flex justify-content-between align-items-center small text-muted mb-1">
                                        <span>Tổng sách</span>
                                        <strong class="text-primary">{{stats.totalBooks}}</strong>
                                    </div>
                                    <div class="d-flex justify-content-between align-items-center small text-muted mb-1">
                                        <span>Tổng người dùng</span>
                                        <strong class="text-primary">{{stats.totalUsers}}</strong>
                                    </div>
                                    <div class="d-flex justify-content-between align-items-center small text-muted">
                                        <span>Đơn hàng hôm nay</span>
                                        <strong class="text-primary">{{stats.todayOrders}}</strong>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
</div>

<style>
/* Admin Layout Styles */
.admin-layout {
    margin-top: 0 !important;
    padding-top: 0 !important;
    background-color: var(--gray-50);
    min-height: 100vh;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    overflow: hidden;
}

.admin-sidebar {
    background: linear-gradient(180deg, var(--primary-color), var(--primary-dark));
    height: 100vh;
    padding: 0;
    box-shadow: 4px 0 20px rgba(30, 58, 138, 0.15);
    position: fixed;
    top: 0;
    left: 0;
    z-index: 1000;
}

.admin-sidebar-content {
    padding: 2rem 0;
    height: 100vh;
    overflow-y: auto;
}

.admin-sidebar-header {
    padding: 0 1.5rem 2rem;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    margin-bottom: 1rem;
}

.admin-sidebar-title {
    color: white;
    font-weight: 700;
    font-size: 1.1rem;
    margin: 0;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.admin-nav-list {
    list-style: none;
    padding: 0;
    margin: 0;
}

.admin-nav-item {
    margin: 0.25rem 0;
}

.admin-nav-link {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 1rem 1.5rem;
    color: rgba(255, 255, 255, 0.8);
    text-decoration: none;
    font-weight: 500;
    transition: all 0.3s ease;
    border-left: 3px solid transparent;
    position: relative;
}

.admin-nav-link:hover {
    color: white;
    background-color: rgba(255, 255, 255, 0.1);
    border-left-color: var(--primary-light);
    transform: translateX(5px);
}

.admin-nav-link.active {
    color: white;
    background-color: rgba(255, 255, 255, 0.15);
    border-left-color: white;
    font-weight: 600;
}

.admin-nav-link i {
    font-size: 1.1rem;
    width: 20px;
    text-align: center;
}

.admin-main-content {
    background-color: var(--gray-50);
    padding: 2rem;
    height: 100vh;
    overflow-y: auto;
    margin-left: 0;
}

/* Stats Cards */
.border-left-primary {
    border-left: 4px solid var(--primary-color) !important;
}

.border-left-success {
    border-left: 4px solid var(--success-color) !important;
}

.border-left-info {
    border-left: 4px solid var(--info-color) !important;
}

.border-left-warning {
    border-left: 4px solid var(--warning-color) !important;
}

.text-xs {
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.text-gray-800 {
    color: var(--gray-800) !important;
    font-weight: 700;
}

.text-gray-300 {
    color: var(--gray-300) !important;
}

/* Card Enhancements */
.card {
    border: none;
    border-radius: 16px;
    box-shadow: 0 4px 20px rgba(30, 58, 138, 0.08);
    transition: all 0.3s ease;
}

.card:hover {
    transform: translateY(-5px);
    box-shadow: 0 12px 40px rgba(30, 58, 138, 0.15);
}

.card-header {
    background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
    color: white;
    border-radius: 16px 16px 0 0 !important;
    border: none;
    padding: 1.5rem;
    font-weight: 600;
}

/* Responsive Design */
@media (max-width: 768px) {
    .admin-sidebar {
        position: fixed;
        top: 0;
        left: -100%;
        width: 280px;
        transition: left 0.3s ease;
        z-index: 1050;
        height: 100vh;
    }
    
    .admin-sidebar.show {
        left: 0;
    }
    
    .admin-main-content {
        margin-left: 0;
        padding: 1rem;
    }
}

/* Scrollbar Styling */
.admin-sidebar-content::-webkit-scrollbar {
    width: 4px;
}

.admin-sidebar-content::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.1);
}

.admin-sidebar-content::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.3);
    border-radius: 2px;
}

.admin-sidebar-content::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 255, 255, 0.5);
}
</style>

<!-- Toasts -->
<div class="toast-container position-fixed bottom-0 end-0 p-3" style="z-index: 2000;">
    <div class="toast align-items-center text-white bg-{{t.variant}} border-0 mb-2 show" role="alert" aria-live="assertive" aria-atomic="true" ng-repeat="t in toasts">
        <div class="d-flex">
            <div class="toast-body">{{t.message}}</div>
            <button type="button" class="btn-close btn-close-white me-2 m-auto" ng-click="toasts.splice($index,1)"></button>
        </div>
    </div>
    </div>

